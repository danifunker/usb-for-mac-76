#ifndef OHCI_DEFS_H#define OHCI_DEFS_H#include ":OHCI:EndpointDescriptor.h"#include ":OHCI:TransferDescriptor.h"#include ":OHCI:Port.h"/************************** * * OHCI Register block * ***************************/// If accessing these directly, don't forget to swap endianness.// Mac OS will handle that if you use its Expansion Bus API, but not// if you access memory directly.typedef enum{	OHCI_HCSTATE_USBRESET,	OHCI_HCSTATE_USBRESUME,	OHCI_HCSTATE_USBOPERATIONAL,	OHCI_HCSTATE_USBSUSPEND} OHCI_HcFunctionalState;/* Bitfield structs for OHCI registers */typedef struct {	UInt32	reserved	: 16;	UInt32	revision	: 16;} OHCI_HcRevisionBits;// specify in reverse?typedef struct {	UInt32	reserved				: 21;	UInt32	remote_wakeup_enable	: 1;	UInt32	remote_wakeup_supported	: 1;	UInt32	interrupt_routing		: 1;	UInt32 	functional_state		: 2;	UInt32	bulk_list_enable		: 1;	UInt32	control_list_enable		: 1;	UInt32	isochronous_enable		: 1;	UInt32	periodic_list_enable	: 1;	UInt32	bulk_service_ratio		: 2;	} OHCI_HcControlBits;typedef struct {	UInt32	controller_reset		: 1;	UInt32	control_list_filled		: 1;	UInt32	bulk_list_filled		: 1;	UInt32	ownership_change_rq		: 1;	UInt32							: 12;	UInt32	scheduling_overruns		: 2;} OHCI_HcCommandStatusBits;/* OHCI registers */typedef struct{	union	{		UInt32				HcRevision;		OHCI_HcRevisionBits	HcRevisionBits;	};		union	{		UInt32 				HcControl;		OHCI_HcControlBits	HcControlBits;	};		union	{		UInt32						HcCommandStatus;		OHCI_HcCommandStatusBits	HcCommandStatusBits;	};		UInt32			HcInterruptStatus;	UInt32			HcInterruptEnable;	UInt32			HcInterruptDisable;	UInt32			HcHCCA;	UInt32			HcPeriodCurrentED;	UInt32			HcControlHeadED;	UInt32			HcControlCurrentED;	UInt32			HcBulkHeadED;	UInt32			HcBulkCurrentED;	UInt32			HcDoneHead;	UInt32			HcFmInterval;	UInt32			HcFmRemaining;	UInt32			HcFmNumber;	UInt32			HcPeriodicStart;	UInt32			HcLSThreshold;	UInt32			HcRhDescriptorA;	UInt32			HcRhDescriptorB;	UInt32			HcRhStatus;	UInt32	HcRhPortStatus[128];	// todo} OHCI_Regs;typedef enum{	OHCI_REG_HCREVISION,	OHCI_REG_HCCONTROL,	OHCI_REG_HCCOMMANDSTATUS,	OHCI_REG_HCINTERRUPTSTATUS,	OHCI_REG_HCINTERRUPTENABLE,	OHCI_REG_HCINTERRUPTDISABLE,	OHCI_REG_HCHCCA,	OHCI_REG_HCPERIODCURRENTED,	OHCI_REG_HCCONTROLHEADED,	OHCI_REG_HCCONTROLCURRENTED,	OHCI_REG_HCBULKHEADED,	OHCI_REG_HCBULKCURRENTED,	OHCI_REG_HCDONEHEAD,	OHCI_REG_HCFMINTERVAL,	OHCI_REG_HCFMREMAINING,	OHCI_REG_HCFMNUMBER,	OHCI_REG_HCPERIODICSTART,	OHCI_REG_HCLSTHRESHOLD,	OHCI_REG_HCRHDESCRIPTORA,	OHCI_REG_HCRHDESCRIPTORB,	OHCI_REG_HCRHSTATUS,	OHCI_REG_HCRHPORTSTATUS_0,	OHCI_REG_HCRHPORTSTATUS_1,	OHCI_REG_HCRHPORTSTATUS_2,	OHCI_REG_HCRHPORTSTATUS_3,	OHCI_REG_HCRHPORTSTATUS_4,	OHCI_REG_HCRHPORTSTATUS_5,	OHCI_REG_HCRHPORTSTATUS_6,	OHCI_REG_HCRHPORTSTATUS_7,	OHCI_REG_HCRHPORTSTATUS_8,	OHCI_REG_HCRHPORTSTATUS_9,	OHCI_REG_HCRHPORTSTATUS_10,	OHCI_REG_HCRHPORTSTATUS_11,	OHCI_REG_HCRHPORTSTATUS_12,	OHCI_REG_HCRHPORTSTATUS_13,	OHCI_REG_HCRHPORTSTATUS_14,	OHCI_REG_HCRHPORTSTATUS_15} OHCI_RegisterIndex;typedef enum{	OHCI_HCCONTROL_CBSR		= (1 << 0),	OHCI_HCCONTROL_PLE		= (1 << 2),	OHCI_HCCONTROL_IE		= (1 << 3),	OHCI_HCCONTROL_CLE		= (1 << 4),	OHCI_HCCONTROL_BLE		= (1 << 5),	OHCI_HCCONTROL_HCFS 	= (1 << 6),	OHCI_HCCONTROL_IR		= (1 << 8),	OHCI_HCCONTROL_RWC		= (1 << 9),	OHCI_HCCONTROL_RWE		= (1 << 10)	// reserved (b11-b31)} OHCI_HcControlFlags;typedef enum{	OHCI_INTFLAG_SO		= (1 << 0),	OHCI_INTFLAG_WDH	= (1 << 1),	OHCI_INTFLAG_SF		= (1 << 2),	OHCI_INTFLAG_RD		= (1 << 3),	OHCI_INTFLAG_UE		= (1 << 4),	OHCI_INTFLAG_FNO	= (1 << 5),	OHCI_INTFLAG_RHSC	= (1 << 6),	OHCI_INTFLAG_OC		= (1 << 30),	OHCI_INTFLAG_MIE  	= (1 << 31)} OHCI_HcInterruptFlags;#define OHCI_INTFLAG_ALLFLAGS ( OHCI_INTFLAG_SO|OHCI_INTFLAG_WDH|OHCI_INTFLAG_SF| \								OHCI_INTFLAG_RD|OHCI_INTFLAG_UE|OHCI_INTFLAG_FNO| \								OHCI_INTFLAG_RHSC|OHCI_INTFLAG_OC|OHCI_INTFLAG_MIE )/************************** * * Host Controller Communications Area (HCCA) * ***************************/  // Host Controller Communications Area (section 4.4)#define OHCI_INTERRUPT_TABLE_SIZE	32typedef struct ohci_host_controller_comms_area_t{	OHCI_ED * 					HccaInterruptTable[OHCI_INTERRUPT_TABLE_SIZE]; // list of pointers to the Interrupt List table	volatile UInt16				HccaFrameNumber;	UInt16						HccaPad1;	UInt32						HccaDoneHead;	UInt8						reserved[116];} OHCI_HostControllerCommsArea;/* Device Descriptor */typedef struct device_descriptor_t{	UInt8 	bLength;	UInt8	bDescriptorType;	UInt16	bcdUSB;	UInt8	bDeviceClass;	UInt8	bDeviceSubClass;	UInt8	bDeviceProtocol;	UInt8	bMaxPacketSize;	UInt16	idVendor;	UInt16	idProduct;	UInt16	bcdDevice;	UInt8	iManufacturer;	UInt8	iProduct;	UInt8	iSerialNumber;	UInt8	iNumConfigurations;} OHCI_DeviceDescriptor;#endif